<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1"
    />
    <title>Acquire Intel Engine</title>
    <link rel="stylesheet" href="/src/brand.css" />
  </head>
  <body>
    <div id="root"></div>

    <script type="module" src="/src/main.tsx"></script>

    <script>
      (function () {
        /* Route redirects */
        const redirects = {
          "/map-insights": "/google-maps-engine",
          "/health": "/scraper-status",
          "/system-health": "/scraper-status",
        };
        const here = location.pathname.replace(/\/+$/, "");
        if (redirects[here]) {
          location.replace(redirects[here]);
          return;
        }

        /* Button unifier */
        const PRIMARY_REGEX = /(save|update|delete|create|add|apply|submit|run|upload|process|sync|confirm)/i;
        function styleButton(btn) {
          if (!(btn instanceof HTMLButtonElement)) return;
          if (!btn.classList.contains('brand-btn')) btn.classList.add('brand-btn');
          const label = (btn.textContent || '').trim();
          const isSubmit = (btn.getAttribute('type') || '').toLowerCase() === 'submit';
          const looksPrimary = isSubmit || PRIMARY_REGEX.test(label);
          if (looksPrimary) btn.removeAttribute('data-variant');
        }
        function scan(root) { root.querySelectorAll?.('button').forEach(styleButton); }
        scan(document);
        const obs = new MutationObserver(muts => {
          for (const m of muts) {
            m.addedNodes.forEach(node => {
              if (node.nodeType !== 1) return;
              if (node.tagName === 'BUTTON') styleButton(node);
              scan(node);
            });
          }
        });
        obs.observe(document.documentElement, { childList: true, subtree: true });
        window.addEventListener('pageshow', () => scan(document));
      })();
    </script>
  </body>
</html>
